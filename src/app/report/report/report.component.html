<app-map [viewVector]="viewVector" (coordinates)="setCoordinates($event)" 
    [setDrawInteraction]="setDrawInteraction"
    [setModifyInteraction]="setModifyInteraction" 
    [removeInteractions]="removeInteractions">
</app-map>
<form #form="ngForm" (ngSubmit)="onReport(form)">
    <div class="form-header">
        <h2>Подай сигнал за нарушение в горите</h2>
        <button [style]="{ backgroundColor: form.invalid ? 'grey' : 'green' }" [disabled]="form.invalid">
            ИЗПРАТИ
        </button>
    </div>
    <div class="images">
        <div class="input-field">
            <label id="images-input-label" for="img-input">
               Приложи снимки (опция)
            </label>
            <input type="file" id="img-input" #inputImages multiple="multiple"
                accept="image/jpeg, image/png, image/jpg"  autocomplete="off"
                (change)="detectFiles($event)" />
        </div>
        <div class="img-container" *ngIf="!!urls">
            <div class="img-card" *ngFor="let url of urls; let index = index;">
                <img [src]="url">
                <span class="img-delete" (click)="deleteImage(url, index)"><i class="fa-solid fa-xmark"></i></span>
            </div>
        </div>
    </div>
    <div class="content">
        <div class="coordinates">
            <input type="text" name="coordinates" id="coordinates" [ngModel]="coordinates" #inputCoordinates="ngModel"
                required readonly placeholder="Място на нарушението (координати)">
                <div class="place">
                    <div class="district">
                        <input type="text" name="district" id="district" [ngModel]="district" #inputDistrict="ngModel" 
                        required placeholder="Област" >
                    </div>
                    <div class="municipality">
                        <input type="text" name="municipality" id="municipality" [ngModel]="municipality" #inputMunicipality="ngModel" 
                        required placeholder="Община" >
                    </div>
                    <div class="land">
                        <input type="text" name="land" id="land" [ngModel]="land" #inputLand="ngModel" 
                        required placeholder="Землище" >
                    </div>
                </div>
            <button type="button" [style]="{ backgroundColor: interactionMode ? 'grey' : 'brown' }"
                [disabled]="interactionMode" (click)="onSetInteractions()">
                Посочи на картата
            </button>
            <button type="button" [style]="{ backgroundColor: !interactionMode ? 'grey' : 'brown' }"
                [disabled]="!interactionMode" (click)="onDeleteInteractions()">
                Изтрий
            </button>
        </div>
        <div class="reason">
            <div class="reason-select">
                <select name="violation" id="violation" ngModel="" #selectReason="ngModel"
                    required>
                    <option value="" disabled selected>Вид нарушение</option>
                    <option *ngFor="let option of violationOptions" [value]="option[0]">{{option[1]}}</option>
                </select>
            </div>
            <div class="description">
                <textarea name="description" id="description" cols="40" rows="3" ngModel #textDescription="ngModel"
                    required placeholder="Описание"></textarea>
            </div>
        </div>
    </div>
</form>